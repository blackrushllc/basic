#!/usr/bin/make -f

export CARGO_HOME=$(CURDIR)/.cargo-home

%:
	dh $@

override_dh_auto_clean:
	# Clean the cargo target directory, ignore failure if nothing to clean
	cargo clean || true

override_dh_auto_configure:
	# No special configure step needed for a pure Cargo project
	:

override_dh_auto_build:
	# Build only the basic binary, offline with vendored crates
	cargo build --release --offline

override_dh_auto_test:
	# Enable later if you have offline-safe tests
	:

override_dh_auto_install:
	# Install the compiled binary into debian/basic/usr/bin
	install -D -m0755 target/release/basic debian/basic/usr/bin/basic
